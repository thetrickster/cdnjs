// SpryValidation.min.js - Spry Pre-Release 1.6.1
// 
// Combined Spry Validation scripts from Adobe's Github Repo for inclusion on CDNJS.com
// From: https://github.com/adobe/Spry.git
// Issues: https://github.com/thetrickster/Spry/issues
//
// Copyright (c) 2006. Adobe Systems Incorporated.
// All rights reserved.
//
// Redistribution and use in source and binary forms, with or without
// modification, are permitted provided that the following conditions are met:
//
//   * Redistributions of source code must retain the above copyright notice,
//     this list of conditions and the following disclaimer.
//   * Redistributions in binary form must reproduce the above copyright notice,
//     this list of conditions and the following disclaimer in the documentation
//     and/or other materials provided with the distribution.
//   * Neither the name of Adobe Systems Incorporated nor the names of its
//     contributors may be used to endorse or promote products derived from this
//     software without specific prior written permission.
//
// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
// ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
// LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
// SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
// CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
// ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
// POSSIBILITY OF SUCH DAMAGE.

var Spry;Spry||(Spry={}),Spry.Widget||(Spry.Widget={}),Spry.Widget.BrowserSniff=function(){""+navigator.appName,""+navigator.platform;var c=""+navigator.userAgent;this.mozilla=this.ie=this.opera=this.safari=!1;var d=/Opera.([0-9\.]*)/i,e=/MSIE.([0-9\.]*)/i,f=/gecko/i,g=/(applewebkit|safari)\/([\d\.]*)/i,h=!1;if(h=c.match(d))this.opera=!0,this.version=parseFloat(h[1]);else if(h=c.match(e))this.ie=!0,this.version=parseFloat(h[1]);else if(h=c.match(g))this.safari=!0,this.version=parseFloat(h[2]);else if(c.match(f)){var i=/rv:\s*([0-9\.]+)/i;h=c.match(i),this.mozilla=!0,this.version=parseFloat(h[1])}this.windows=this.mac=this.linux=!1,this.Platform=c.match(/windows/i)?"windows":c.match(/linux/i)?"linux":c.match(/mac/i)?"mac":c.match(/unix/i)?"unix":"unknown",this[this.Platform]=!0,this.v=this.version,this.safari&&this.mac&&this.mozilla&&(this.mozilla=!1)},Spry.is=new Spry.Widget.BrowserSniff,Spry.Widget.ValidationCheckbox=function(a,b){this.init(a),Spry.Widget.Utils.setOptions(this,b);var c=["submit"].concat(this.validateOn||[]);c=c.join(","),this.validateOn=0|(-1!=c.indexOf("submit")?Spry.Widget.ValidationCheckbox.ONSUBMIT:0),this.validateOn=this.validateOn|(-1!=c.indexOf("blur")?Spry.Widget.ValidationCheckbox.ONBLUR:0),this.validateOn=this.validateOn|(-1!=c.indexOf("change")?Spry.Widget.ValidationCheckbox.ONCHANGE:0),isNaN(this.minSelections)||(this.minSelections=this.minSelections>0?parseInt(this.minSelections,10):null),isNaN(this.maxSelections)||(this.maxSelections=this.maxSelections>0?parseInt(this.maxSelections,10):null),this.additionalError&&(this.additionalError=this.getElement(this.additionalError)),Spry.Widget.ValidationCheckbox.onloadDidFire?this.attachBehaviors():Spry.Widget.ValidationCheckbox.loadQueue.push(this)},Spry.Widget.ValidationCheckbox.ONCHANGE=1,Spry.Widget.ValidationCheckbox.ONBLUR=2,Spry.Widget.ValidationCheckbox.ONSUBMIT=4,Spry.Widget.ValidationCheckbox.prototype.init=function(a){this.element=this.getElement(a),this.checkboxElements=null,this.additionalError=!1,this.form=null,this.event_handlers=[],this.hasFocus=!1,this.requiredClass="checkboxRequiredState",this.minSelectionsClass="checkboxMinSelectionsState",this.maxSelectionsClass="checkboxMaxSelectionsState",this.focusClass="checkboxFocusState",this.validClass="checkboxValidState",this.isRequired=!0,this.minSelections=null,this.maxSelections=null,this.validateOn=["submit"]},Spry.Widget.ValidationCheckbox.prototype.destroy=function(){if(this.event_handlers)for(var a=0;this.event_handlers.length>a;a++)Spry.Widget.Utils.removeEventListener(this.event_handlers[a][0],this.event_handlers[a][1],this.event_handlers[a][2],!1);try{delete this.element}catch(b){}if(this.checkboxElements)for(var a=0;this.checkboxElements.length>a;a++)try{delete this.checkboxElements[a]}catch(b){}try{delete this.checkboxElements}catch(b){}try{delete this.form}catch(b){}try{delete this.event_handlers}catch(b){}for(var c=Spry.Widget.Form.onSubmitWidgetQueue,d=c.length,a=0;d>a;a++)if(c[a]==this){c.splice(a,1);break}},Spry.Widget.ValidationCheckbox.onloadDidFire=!1,Spry.Widget.ValidationCheckbox.loadQueue=[],Spry.Widget.ValidationCheckbox.prototype.getElement=function(a){return a&&"string"==typeof a?document.getElementById(a):a},Spry.Widget.ValidationCheckbox.processLoadQueue=function(){Spry.Widget.ValidationCheckbox.onloadDidFire=!0;for(var b=Spry.Widget.ValidationCheckbox.loadQueue,c=b.length,d=0;c>d;d++)b[d].attachBehaviors()},Spry.Widget.ValidationCheckbox.addLoadListener=function(a){window.addEventListener!==void 0?window.addEventListener("load",a,!1):document.addEventListener!==void 0?document.addEventListener("load",a,!1):window.attachEvent!==void 0&&window.attachEvent("onload",a)},Spry.Widget.ValidationCheckbox.addLoadListener(Spry.Widget.ValidationCheckbox.processLoadQueue),Spry.Widget.ValidationCheckbox.addLoadListener(function(){Spry.Widget.Utils.addEventListener(window,"unload",Spry.Widget.Form.destroyAll,!1)}),Spry.Widget.ValidationCheckbox.prototype.attachBehaviors=function(){if(this.element&&(this.checkboxElements="INPUT"==this.element.nodeName?[this.element]:this.getCheckboxes(),this.checkboxElements)){var a=this;this.event_handlers=[];for(var b=this.checkboxElements.length,c=0;b>c;c++)this.event_handlers.push([this.checkboxElements[c],"focus",function(b){return a.onFocus(b)}]),this.event_handlers.push([this.checkboxElements[c],"blur",function(b){return a.onBlur(b)}]),this.validateOn&Spry.Widget.ValidationCheckbox.ONCHANGE&&this.event_handlers.push([this.checkboxElements[c],"click",function(b){return a.onClick(b)}]);for(var c=0;this.event_handlers.length>c;c++)Spry.Widget.Utils.addEventListener(this.event_handlers[c][0],this.event_handlers[c][1],this.event_handlers[c][2],!1);this.form=Spry.Widget.Utils.getFirstParentWithNodeName(this.element,"FORM"),this.form&&(this.form.attachedSubmitHandler||this.form.onsubmit||(this.form.onsubmit=function(a){return a=a||event,Spry.Widget.Form.onSubmit(a,a.srcElement||a.currentTarget)},this.form.attachedSubmitHandler=!0),this.form.attachedResetHandler||(Spry.Widget.Utils.addEventListener(this.form,"reset",function(a){return a=a||event,Spry.Widget.Form.onReset(a,a.srcElement||a.currentTarget)},!1),this.form.attachedResetHandler=!0),Spry.Widget.Form.onSubmitWidgetQueue.push(this))}},Spry.Widget.ValidationCheckbox.prototype.getCheckboxes=function(){var a,b=this.element.getElementsByTagName("INPUT");if(b.length){a=[];for(var c=b.length,d=0;c>d;d++)"checkbox"==b[d].type&&a.push(b[d]);return a}return null},Spry.Widget.ValidationCheckbox.prototype.addClassName=function(a,b){!a||!b||a.className&&-1!=a.className.search(RegExp("\\b"+b+"\\b"))||(a.className+=(a.className?" ":"")+b)},Spry.Widget.ValidationCheckbox.prototype.removeClassName=function(a,b){!a||!b||a.className&&-1==a.className.search(RegExp("\\b"+b+"\\b"))||(a.className=a.className.replace(RegExp("\\s*\\b"+b+"\\b","g"),""))},Spry.Widget.ValidationCheckbox.prototype.onFocus=function(a){var b=null!=a.srcElement?a.srcElement:a.target;b.disabled||(this.hasFocus=!0,this.addClassName(this.element,this.focusClass),this.addClassName(this.additionalError,this.focusClass))},Spry.Widget.ValidationCheckbox.prototype.onBlur=function(a){var b=null!=a.srcElement?a.srcElement:a.target;if(!b.disabled){this.hasFocus=!1;var c=!1;this.validateOn&Spry.Widget.ValidationCheckbox.ONBLUR&&(c=!0),c&&this.validate(),this.removeClassName(this.element,this.focusClass),this.removeClassName(this.additionalError,this.focusClass)}},Spry.Widget.ValidationCheckbox.prototype.onClick=function(a){var b=null!=a.srcElement?a.srcElement:a.target;b.disabled||this.validate()},Spry.Widget.ValidationCheckbox.prototype.reset=function(){this.removeClassName(this.element,this.validClass),this.removeClassName(this.element,this.requiredClass),this.removeClassName(this.element,this.minSelectionsClass),this.removeClassName(this.element,this.maxSelectionsClass),this.removeClassName(this.additionalError,this.validClass),this.removeClassName(this.additionalError,this.requiredClass),this.removeClassName(this.additionalError,this.minSelectionsClass),this.removeClassName(this.additionalError,this.maxSelectionsClass)},Spry.Widget.ValidationCheckbox.prototype.validate=function(){this.reset();var a=0;if(this.checkboxElements)for(var b=this.checkboxElements.length,c=0;b>c;c++)!this.checkboxElements[c].disabled&&this.checkboxElements[c].checked&&a++;return this.isRequired&&0==a?(this.addClassName(this.element,this.requiredClass),this.addClassName(this.additionalError,this.requiredClass),!1):this.minSelections&&this.minSelections>a?(this.addClassName(this.element,this.minSelectionsClass),this.addClassName(this.additionalError,this.minSelectionsClass),!1):this.maxSelections&&a>this.maxSelections?(this.addClassName(this.element,this.maxSelectionsClass),this.addClassName(this.additionalError,this.maxSelectionsClass),!1):(this.addClassName(this.element,this.validClass),this.addClassName(this.additionalError,this.validClass),!0)},Spry.Widget.ValidationCheckbox.prototype.isDisabled=function(){var a=!0;if(this.checkboxElements)for(var b=this.checkboxElements.length,c=0;b>c;c++)if(!this.checkboxElements[c].disabled){a=!1;break}return a},Spry.Widget.ValidationConfirm=function(a,b,c){if(c=Spry.Widget.Utils.firstValid(c,{}),this.isBrowserSupported()){if(this.init(a,b,c)===!1)return!1;var d=["submit"].concat(Spry.Widget.Utils.firstValid(this.options.validateOn,[]));d=d.join(","),this.validateOn=0,this.validateOn=this.validateOn|(-1!=d.indexOf("submit")?Spry.Widget.ValidationConfirm.ONSUBMIT:0),this.validateOn=this.validateOn|(-1!=d.indexOf("blur")?Spry.Widget.ValidationConfirm.ONBLUR:0),this.validateOn=this.validateOn|(-1!=d.indexOf("change")?Spry.Widget.ValidationConfirm.ONCHANGE:0),Spry.Widget.ValidationConfirm.onloadDidFire?this.attachBehaviors():Spry.Widget.ValidationConfirm.loadQueue.push(this)}},Spry.Widget.ValidationConfirm.ONCHANGE=1,Spry.Widget.ValidationConfirm.ONBLUR=2,Spry.Widget.ValidationConfirm.ONSUBMIT=4,Spry.Widget.ValidationConfirm.prototype.init=function(a,b,c){if(c=Spry.Widget.Utils.firstValid(c,[]),this.options=[],this.element=this.getElement(a),!this.element)return this.showError("The element "+(a&&""!=a?a+" doesn't exists!":"to be validated is not defined!")),!1;if(this.input="INPUT"!=this.element.nodeName.toUpperCase()||void 0!==this.element.type&&-1!=",RADIO,CHECKBOX,BUTTON,SUBMIT,IMAGE,".indexOf(","+this.element.type.toUpperCase+",")?Spry.Widget.Utils.getFirstChildWithNodeNameAtAnyLevel(this.element,"INPUT"):this.element,!this.input)return this.showError("Element "+a+" doesn't contain any form input!"),!1;var d=this.getElement(b);return this.firstInput=!1,d?("INPUT"!=d.nodeName.toUpperCase()?this.firstInput=Spry.Widget.Utils.getFirstChildWithNodeNameAtAnyLevel(d,"INPUT"):(d.type===void 0||-1==",RADIO,CHECKBOX,BUTTON,SUBMIT,IMAGE,".indexOf(","+d.type.toUpperCase()+","))&&(this.firstInput=d),this.firstInput?(this.event_handlers=[],this.validClass="confirmValidState",this.focusClass="confirmFocusState",this.requiredClass="confirmRequiredState",this.invalidClass="confirmInvalidState",c.isRequired=Spry.Widget.Utils.firstValid(c.isRequired,!0),c.additionalError=Spry.Widget.Utils.firstValid(c.additionalError,!1),c.additionalError&&(c.additionalError=this.getElement(c.additionalError)),Spry.Widget.Utils.setOptions(this,c),Spry.Widget.Utils.setOptions(this.options,c),void 0):(this.showError("Element "+b+" doesn't contain any form input!"),!1)):(this.showError("The element "+(b&&""!=b?b+" doesn't exists!":"that contains the value to be validated is not defined!")),!1)},Spry.Widget.ValidationConfirm.loadQueue=[],Spry.Widget.ValidationConfirm.onloadDidFire=!1,Spry.Widget.ValidationConfirm.prototype.getElement=function(a){return a&&"string"==typeof a&&(a=document.getElementById(a)),a},Spry.Widget.ValidationConfirm.processLoadQueue=function(){Spry.Widget.ValidationConfirm.onloadDidFire=!0;for(var b=Spry.Widget.ValidationConfirm.loadQueue,c=b.length,d=0;c>d;d++)b[d].attachBehaviors()},Spry.Widget.ValidationConfirm.addLoadListener=function(a){window.addEventListener!==void 0?window.addEventListener("load",a,!1):document.addEventListener!==void 0?document.addEventListener("load",a,!1):window.attachEvent!==void 0&&window.attachEvent("onload",a)},Spry.Widget.ValidationConfirm.addLoadListener(Spry.Widget.ValidationConfirm.processLoadQueue),Spry.Widget.ValidationConfirm.prototype.destroy=function(){if(this.event_handlers)for(var a=0;this.event_handlers.length>a;a++)Spry.Widget.Utils.removeEventListener(this.event_handlers[a][0],this.event_handlers[a][1],this.event_handlers[a][2],!1);try{delete this.element}catch(b){}try{delete this.input}catch(b){}try{delete this.event_handlers}catch(b){}try{delete this.options}catch(b){}for(var c=Spry.Widget.Form.onSubmitWidgetQueue,d=c.length,a=0;d>a;a++)if(c[a]==this){c.splice(a,1);break}},Spry.Widget.ValidationConfirm.prototype.attachBehaviors=function(){if(!(this.event_handlers&&this.event_handlers.length>0)){var a=this.event_handlers;if(this.input){var b=this;if(this.input.setAttribute("AutoComplete","off"),this.validateOn&Spry.Widget.ValidationConfirm.ONCHANGE){var c=Spry.is.mozilla||Spry.is.opera||Spry.is.safari?"input":Spry.is.ie?"propertychange":"change";a.push([this.input,c,function(a){return b.isDisabled()?!0:b.validate(a||event)}]),Spry.is.mozilla||Spry.is.safari?a.push([this.input,"dragdrop",function(a){return b.isDisabled()?!0:b.validate(a)}]):Spry.is.ie&&a.push([this.input,"drop",function(){return b.isDisabled()?!0:b.validate(event)}])}a.push([this.input,"blur",function(a){return b.isDisabled()?!0:b.onBlur(a||event)}]),a.push([this.input,"focus",function(a){return b.isDisabled()?!0:b.onFocus(a||event)}]);for(var d=0;this.event_handlers.length>d;d++)Spry.Widget.Utils.addEventListener(this.event_handlers[d][0],this.event_handlers[d][1],this.event_handlers[d][2],!1);this.form=Spry.Widget.Utils.getFirstParentWithNodeName(this.input,"FORM"),this.form&&(this.form.attachedSubmitHandler||this.form.onsubmit||(this.form.onsubmit=function(a){return a=a||event,Spry.Widget.Form.onSubmit(a,a.srcElement||a.currentTarget)},this.form.attachedSubmitHandler=!0),this.form.attachedResetHandler||(Spry.Widget.Utils.addEventListener(this.form,"reset",function(a){var a=a||event;return Spry.Widget.Form.onReset(a,a.srcElement||a.currentTarget)},!1),this.form.attachedResetHandler=!0),Spry.Widget.Form.onSubmitWidgetQueue.push(this))}}},Spry.Widget.ValidationConfirm.prototype.reset=function(){this.switchClassName(this.element,""),this.switchClassName(this.additionalError,""),this.removeClassName(this.element,this.focusClass),this.removeClassName(this.additionalError,this.focusClass),Spry.is.ie&&(this.input.forceFireFirstOnPropertyChange=!0,this.input.removeAttribute("forceFireFirstOnPropertyChange"))},Spry.Widget.ValidationConfirm.prototype.validate=function(){return this.isRequired&&""==this.input.value?(this.switchClassName(this.element,this.requiredClass),this.switchClassName(this.additionalError,this.requiredClass),!1):this.input.value.length>0&&this.input.value!=this.firstInput.value?(this.switchClassName(this.element,this.invalidClass),this.switchClassName(this.additionalError,this.invalidClass),!1):(this.switchClassName(this.element,this.validClass),this.switchClassName(this.additionalError,this.validClass),!0)},Spry.Widget.ValidationConfirm.prototype.onBlur=function(a){this.removeClassName(this.element,this.focusClass),this.removeClassName(this.additionalError,this.focusClass),this.validateOn&Spry.Widget.ValidationConfirm.ONBLUR&&this.validate(a)},Spry.Widget.ValidationConfirm.prototype.onFocus=function(){this.addClassName(this.element,this.focusClass),this.addClassName(this.additionalError,this.focusClass)},Spry.Widget.ValidationConfirm.prototype.switchClassName=function(a,b){for(var c=[this.validClass,this.requiredClass,this.invalidClass],d=0;c.length>d;d++)this.removeClassName(a,c[d]);this.addClassName(a,b)},Spry.Widget.ValidationConfirm.prototype.addClassName=function(a,b){!a||!b||a.className&&-1!=a.className.indexOf(b)&&-1!=a.className.search(RegExp("\\b"+b+"\\b"))||(a.className+=(a.className?" ":"")+b)},Spry.Widget.ValidationConfirm.prototype.removeClassName=function(a,b){!a||!b||a.className&&-1!=a.className.indexOf(b)&&-1==a.className.search(RegExp("\\b"+b+"\\b"))||(a.className=a.className.replace(RegExp("\\s*\\b"+b+"\\b","g"),""))},Spry.Widget.ValidationConfirm.prototype.isBrowserSupported=function(){return Spry.is.ie&&Spry.is.v>=5&&Spry.is.windows||Spry.is.mozilla&&Spry.is.v>=1.4||Spry.is.safari||Spry.is.opera&&Spry.is.v>=9},Spry.Widget.ValidationConfirm.prototype.isDisabled=function(){return this.input&&(this.input.disabled||this.input.readOnly)||!this.input},Spry.Widget.ValidationConfirm.prototype.showError=function(a){alert("Spry.ValidationConfirm ERR: "+a)},Spry.Widget.ValidationRadio=function(a,b){this.init(a),Spry.Widget.Utils.setOptions(this,b);var c=["submit"].concat(this.validateOn||[]);c=c.join(","),this.validateOn=0|(-1!=c.indexOf("submit")?Spry.Widget.ValidationRadio.ONSUBMIT:0),this.validateOn=this.validateOn|(-1!=c.indexOf("blur")?Spry.Widget.ValidationRadio.ONBLUR:0),this.validateOn=this.validateOn|(-1!=c.indexOf("change")?Spry.Widget.ValidationRadio.ONCHANGE:0),this.additionalError&&(this.additionalError=this.getElement(this.additionalError)),Spry.Widget.ValidationRadio.onloadDidFire?this.attachBehaviors():Spry.Widget.ValidationRadio.loadQueue.push(this)},Spry.Widget.ValidationRadio.ONCHANGE=1,Spry.Widget.ValidationRadio.ONBLUR=2,Spry.Widget.ValidationRadio.ONSUBMIT=4,Spry.Widget.ValidationRadio.prototype.init=function(a){this.element=this.getElement(a),this.additionalError=!1,this.radioElements=null,this.form=null,this.event_handlers=[],this.requiredClass="radioRequiredState",this.focusClass="radioFocusState",this.invalidClass="radioInvalidState",this.validClass="radioValidState",this.emptyValue="",this.invalidValue=null,this.isRequired=!0,this.validateOn=["submit"]},Spry.Widget.ValidationRadio.onloadDidFire=!1,Spry.Widget.ValidationRadio.loadQueue=[],Spry.Widget.ValidationRadio.prototype.getElement=function(a){return a&&"string"==typeof a?document.getElementById(a):a},Spry.Widget.ValidationRadio.processLoadQueue=function(){Spry.Widget.ValidationRadio.onloadDidFire=!0;for(var b=Spry.Widget.ValidationRadio.loadQueue,c=b.length,d=0;c>d;d++)b[d].attachBehaviors()},Spry.Widget.ValidationRadio.addLoadListener=function(a){window.addEventListener!==void 0?window.addEventListener("load",a,!1):document.addEventListener!==void 0?document.addEventListener("load",a,!1):window.attachEvent!==void 0&&window.attachEvent("onload",a)},Spry.Widget.ValidationRadio.addLoadListener(Spry.Widget.ValidationRadio.processLoadQueue),Spry.Widget.ValidationRadio.addLoadListener(function(){Spry.Widget.Utils.addEventListener(window,"unload",Spry.Widget.Form.destroyAll,!1)}),Spry.Widget.ValidationRadio.prototype.attachBehaviors=function(){if(this.element&&(this.radioElements="INPUT"==this.element.nodeName?[this.element]:this.getRadios(),this.radioElements)){var a=this;this.event_handlers=[];for(var b=this.radioElements.length,c=0;b>c;c++)this.event_handlers.push([this.radioElements[c],"focus",function(b){return a.onFocus(b)}]),this.event_handlers.push([this.radioElements[c],"blur",function(b){return a.onBlur(b)}]),this.validateOn&Spry.Widget.ValidationRadio.ONCHANGE&&this.event_handlers.push([this.radioElements[c],"click",function(b){return a.onClick(b)}]);for(var c=0;this.event_handlers.length>c;c++)Spry.Widget.Utils.addEventListener(this.event_handlers[c][0],this.event_handlers[c][1],this.event_handlers[c][2],!1);this.form=Spry.Widget.Utils.getFirstParentWithNodeName(this.element,"FORM"),this.form&&(this.form.attachedSubmitHandler||this.form.onsubmit||(this.form.onsubmit=function(a){return a=a||event,Spry.Widget.Form.onSubmit(a,a.srcElement||a.currentTarget)},this.form.attachedSubmitHandler=!0),this.form.attachedResetHandler||(Spry.Widget.Utils.addEventListener(this.form,"reset",function(a){return a=a||event,Spry.Widget.Form.onReset(a,a.srcElement||a.currentTarget)},!1),this.form.attachedResetHandler=!0),Spry.Widget.Form.onSubmitWidgetQueue.push(this))}},Spry.Widget.ValidationRadio.prototype.getRadios=function(){var a,b=this.element.getElementsByTagName("INPUT");if(b.length){a=[];for(var c=b.length,d=0;c>d;d++)"radio"==b[d].getAttribute("type").toLowerCase()&&a.push(b[d]);return a}return null},Spry.Widget.ValidationRadio.prototype.addClassName=function(a,b){!a||!b||a.className&&-1!=a.className.search(RegExp("\\b"+b+"\\b"))||(a.className+=(a.className?" ":"")+b)},Spry.Widget.ValidationRadio.prototype.removeClassName=function(a,b){!a||!b||a.className&&-1==a.className.search(RegExp("\\b"+b+"\\b"))||(a.className=a.className.replace(RegExp("\\s*\\b"+b+"\\b","g"),""))},Spry.Widget.ValidationRadio.prototype.onFocus=function(a){var b=null!=a.srcElement?a.srcElement:a.target;b.disabled||(this.addClassName(this.element,this.focusClass),this.addClassName(this.additionalError,this.focusClass))},Spry.Widget.ValidationRadio.prototype.onBlur=function(a){var b=null!=a.srcElement?a.srcElement:a.target;if(!b.disabled){var c=!1;this.validateOn&Spry.Widget.ValidationRadio.ONBLUR&&(c=!0),c&&this.validate(),this.removeClassName(this.element,this.focusClass),this.removeClassName(this.additionalError,this.focusClass)}},Spry.Widget.ValidationRadio.prototype.onClick=function(a){var b=null!=a.srcElement?a.srcElement:a.target;b.disabled||this.validate()},Spry.Widget.ValidationRadio.prototype.reset=function(){this.removeClassName(this.element,this.validClass),this.removeClassName(this.element,this.requiredClass),this.removeClassName(this.element,this.invalidClass),this.removeClassName(this.additionalError,this.validClass),this.removeClassName(this.additionalError,this.requiredClass),this.removeClassName(this.additionalError,this.invalidClass)},Spry.Widget.ValidationRadio.prototype.validate=function(){this.reset();var a=0,b=0,c=0;if(this.radioElements)for(var d=this.radioElements.length,e=0;d>e;e++)!this.radioElements[e].disabled&&this.radioElements[e].checked&&(this.radioElements[e].value==this.emptyValue?c++:this.invalidValue&&this.radioElements[e].value==this.invalidValue?b++:a++);return this.invalidValue&&0!=b?(this.addClassName(this.element,this.invalidClass),this.addClassName(this.additionalError,this.invalidClass),!1):!this.isRequired||0!=a&&0==c?(this.addClassName(this.element,this.validClass),this.addClassName(this.additionalError,this.validClass),!0):(this.addClassName(this.element,this.requiredClass),this.addClassName(this.additionalError,this.requiredClass),!1)},Spry.Widget.ValidationRadio.prototype.isDisabled=function(){var a=!0;if(this.radioElements)for(var b=this.radioElements.length,c=0;b>c;c++)if(!this.radioElements[c].disabled){a=!1;break}return a},Spry.Widget.ValidationRadio.prototype.destroy=function(){if(this.event_handlers)for(var a=0;this.event_handlers.length>a;a++)Spry.Widget.Utils.removeEventListener(this.event_handlers[a][0],this.event_handlers[a][1],this.event_handlers[a][2],!1);try{delete this.element}catch(b){}if(this.radioElements)for(var a=0;this.radioElements.length>a;a++)try{delete this.radioElements[a]}catch(b){}try{delete this.radioElements}catch(b){}try{delete this.form}catch(b){}try{delete this.event_handlers}catch(b){}for(var c=Spry.Widget.Form.onSubmitWidgetQueue,d=c.length,a=0;d>a;a++)if(c[a]==this){c.splice(a,1);break}},Spry.Widget.ValidationSelect=function(a,b){this.init(a),Spry.Widget.Utils.setOptions(this,b);var c=["submit"].concat(this.validateOn||[]);c=c.join(","),this.validateOn=0|(-1!=c.indexOf("submit")?Spry.Widget.ValidationSelect.ONSUBMIT:0),this.validateOn=this.validateOn|(-1!=c.indexOf("blur")?Spry.Widget.ValidationSelect.ONBLUR:0),this.validateOn=this.validateOn|(-1!=c.indexOf("change")?Spry.Widget.ValidationSelect.ONCHANGE:0),this.additionalError&&(this.additionalError=this.getElement(this.additionalError)),Spry.Widget.ValidationSelect.onloadDidFire?this.attachBehaviors():Spry.Widget.ValidationSelect.loadQueue.push(this)},Spry.Widget.ValidationSelect.ONCHANGE=1,Spry.Widget.ValidationSelect.ONBLUR=2,Spry.Widget.ValidationSelect.ONSUBMIT=4,Spry.Widget.ValidationSelect.prototype.init=function(a){this.element=this.getElement(a),this.additionalError=!1,this.selectElement=null,this.form=null,this.event_handlers=[],this.requiredClass="selectRequiredState",this.invalidClass="selectInvalidState",this.focusClass="selectFocusState",this.validClass="selectValidState",this.emptyValue="",this.invalidValue=null,this.isRequired=!0,this.validateOn=["submit"],this.validatedByOnChangeEvent=!1},Spry.Widget.ValidationSelect.prototype.destroy=function(){if(this.event_handlers)for(var a=0;this.event_handlers.length>a;a++)Spry.Widget.Utils.removeEventListener(this.event_handlers[a][0],this.event_handlers[a][1],this.event_handlers[a][2],!1);try{delete this.element}catch(b){}try{delete this.selectElement}catch(b){}try{delete this.form}catch(b){}try{delete this.event_handlers}catch(b){}for(var c=Spry.Widget.Form.onSubmitWidgetQueue,d=c.length,a=0;d>a;a++)if(c[a]==this){c.splice(a,1);break}},Spry.Widget.ValidationSelect.onloadDidFire=!1,Spry.Widget.ValidationSelect.loadQueue=[],Spry.Widget.ValidationSelect.prototype.getElement=function(a){return a&&"string"==typeof a?document.getElementById(a):a},Spry.Widget.ValidationSelect.processLoadQueue=function(){Spry.Widget.ValidationSelect.onloadDidFire=!0;for(var b=Spry.Widget.ValidationSelect.loadQueue,c=b.length,d=0;c>d;d++)b[d].attachBehaviors()},Spry.Widget.ValidationSelect.addLoadListener=function(a){window.addEventListener!==void 0?window.addEventListener("load",a,!1):document.addEventListener!==void 0?document.addEventListener("load",a,!1):window.attachEvent!==void 0&&window.attachEvent("onload",a)},Spry.Widget.ValidationSelect.addLoadListener(Spry.Widget.ValidationSelect.processLoadQueue),Spry.Widget.ValidationSelect.addLoadListener(function(){Spry.Widget.Utils.addEventListener(window,"unload",Spry.Widget.Form.destroyAll,!1)}),Spry.Widget.ValidationSelect.prototype.attachBehaviors=function(){if(this.selectElement="SELECT"==this.element.nodeName?this.element:Spry.Widget.Utils.getFirstChildWithNodeNameAtAnyLevel(this.element,"SELECT"),this.selectElement){var a=this;this.event_handlers=[];var b="focus",c=navigator.userAgent.match(/msie (\d+)\./i);c&&(c=parseInt(c[1],10),c>=6&&(b="beforeactivate")),this.event_handlers.push([this.selectElement,b,function(b){return a.isDisabled()?!0:a.onFocus(b)}]),this.event_handlers.push([this.selectElement,"blur",function(b){return a.isDisabled()?!0:a.onBlur(b)}]),this.validateOn&Spry.Widget.ValidationSelect.ONCHANGE&&(this.event_handlers.push([this.selectElement,"change",function(b){return a.isDisabled()?!0:a.onChange(b)}]),this.event_handlers.push([this.selectElement,"keypress",function(b){return a.isDisabled()?!0:a.onChange(b)}]));for(var d=0;this.event_handlers.length>d;d++)Spry.Widget.Utils.addEventListener(this.event_handlers[d][0],this.event_handlers[d][1],this.event_handlers[d][2],!1);this.form=Spry.Widget.Utils.getFirstParentWithNodeName(this.selectElement,"FORM"),this.form&&(this.form.attachedSubmitHandler||this.form.onsubmit||(this.form.onsubmit=function(a){return a=a||event,Spry.Widget.Form.onSubmit(a,a.srcElement||a.currentTarget)},this.form.attachedSubmitHandler=!0),this.form.attachedResetHandler||(Spry.Widget.Utils.addEventListener(this.form,"reset",function(a){return a=a||event,Spry.Widget.Form.onReset(a,a.srcElement||a.currentTarget)},!1),this.form.attachedResetHandler=!0),Spry.Widget.Form.onSubmitWidgetQueue.push(this))}},Spry.Widget.ValidationSelect.prototype.addClassName=function(a,b){!a||!b||a.className&&-1!=a.className.search(RegExp("\\b"+b+"\\b"))||(a.className+=(a.className?" ":"")+b)},Spry.Widget.ValidationSelect.prototype.removeClassName=function(a,b){!a||!b||a.className&&-1==a.className.search(RegExp("\\b"+b+"\\b"))||(a.className=a.className.replace(RegExp("\\s*\\b"+b+"\\b","g"),""))},Spry.Widget.ValidationSelect.prototype.onFocus=function(){this.hasFocus=!0,this.validatedByOnChangeEvent=!1,this.addClassName(this.element,this.focusClass),this.addClassName(this.additionalError,this.focusClass)},Spry.Widget.ValidationSelect.prototype.onBlur=function(){this.hasFocus=!1;var b=!1;this.validateOn&Spry.Widget.ValidationSelect.ONBLUR&&(b=!0),b&&!this.validatedByOnChangeEvent&&this.validate(),this.removeClassName(this.element,this.focusClass),this.removeClassName(this.additionalError,this.focusClass)},Spry.Widget.ValidationSelect.prototype.onChange=function(){this.hasFocus=!1,this.validate(),this.validatedByOnChangeEvent=!0},Spry.Widget.ValidationSelect.prototype.reset=function(){this.removeClassName(this.element,this.requiredClass),this.removeClassName(this.element,this.invalidClass),this.removeClassName(this.element,this.validClass),this.removeClassName(this.additionalError,this.requiredClass),this.removeClassName(this.additionalError,this.invalidClass),this.removeClassName(this.additionalError,this.validClass)},Spry.Widget.ValidationSelect.prototype.validate=function(){if(this.reset(),this.isRequired){if(0==this.selectElement.options.length||-1==this.selectElement.selectedIndex)return this.addClassName(this.element,this.requiredClass),this.addClassName(this.additionalError,this.requiredClass),!1;if(null==this.selectElement.options[this.selectElement.selectedIndex].getAttribute("value"))return this.addClassName(this.element,this.requiredClass),this.addClassName(this.additionalError,this.requiredClass),!1;if(this.selectElement.options[this.selectElement.selectedIndex].value==this.emptyValue)return this.addClassName(this.element,this.requiredClass),this.addClassName(this.additionalError,this.requiredClass),!1;if(this.selectElement.options[this.selectElement.selectedIndex].disabled)return this.addClassName(this.element,this.requiredClass),this.addClassName(this.additionalError,this.requiredClass),!1}return this.invalidValue&&this.selectElement.options.length>0&&-1!=this.selectElement.selectedIndex&&this.selectElement.options[this.selectElement.selectedIndex].value==this.invalidValue?(this.addClassName(this.element,this.invalidClass),this.addClassName(this.additionalError,this.invalidClass),!1):(this.addClassName(this.element,this.validClass),this.addClassName(this.additionalError,this.validClass),!0)},Spry.Widget.ValidationSelect.prototype.isDisabled=function(){return this.selectElement.disabled},Spry.Widget.ValidationTextarea=function(a,b){if(b=Spry.Widget.Utils.firstValid(b,{}),this.flags={locked:!1},this.options={},this.element=a,this.init(a),this.isBrowserSupported()){b.useCharacterMasking=Spry.Widget.Utils.firstValid(b.useCharacterMasking,!0),b.hint=Spry.Widget.Utils.firstValid(b.hint,""),b.isRequired=Spry.Widget.Utils.firstValid(b.isRequired,!0),b.additionalError=Spry.Widget.Utils.firstValid(b.additionalError,!1),Spry.Widget.Utils.setOptions(this,b),Spry.Widget.Utils.setOptions(this.options,b),b.additionalError&&(this.additionalError=this.getElement(b.additionalError));var c=["submit"].concat(Spry.Widget.Utils.firstValid(this.options.validateOn,[]));c=c.join(","),this.validateOn=0,this.validateOn=this.validateOn|(-1!=c.indexOf("submit")?Spry.Widget.ValidationTextarea.ONSUBMIT:0),this.validateOn=this.validateOn|(-1!=c.indexOf("blur")?Spry.Widget.ValidationTextarea.ONBLUR:0),this.validateOn=this.validateOn|(-1!=c.indexOf("change")?Spry.Widget.ValidationTextarea.ONCHANGE:0),Spry.Widget.ValidationTextarea.onloadDidFire?this.attachBehaviors():Spry.Widget.ValidationTextarea.loadQueue.push(this)}},Spry.Widget.ValidationTextarea.ONCHANGE=1,Spry.Widget.ValidationTextarea.ONBLUR=2,Spry.Widget.ValidationTextarea.ONSUBMIT=4,Spry.Widget.ValidationTextarea.INITIAL="Initial",Spry.Widget.ValidationTextarea.REQUIRED="Required",Spry.Widget.ValidationTextarea.INVALID="Invalid Format",Spry.Widget.ValidationTextarea.MINIMUM="Minimum Number of Chars Not Met",Spry.Widget.ValidationTextarea.MAXIMUM="Maximum Number of Chars Exceeded",Spry.Widget.ValidationTextarea.VALID="Valid",Spry.Widget.ValidationTextarea.prototype.init=function(a){this.element=this.getElement(a),this.event_handlers=[],this.requiredClass="textareaRequiredState",this.invalidCharsMaxClass="textareaMaxCharsState",this.invalidCharsMinClass="textareaMinCharsState",this.validClass="textareaValidState",this.focusClass="textareaFocusState",this.hintClass="textareaHintState",this.textareaFlashClass="textareaFlashState",this.isMaxInvalid=!1,this.isMinInvalid=!1,this.isRequireInvalid=!1,this.safariClicked=!1,this.state=Spry.Widget.ValidationTextarea.INITIAL},Spry.Widget.ValidationTextarea.prototype.destroy=function(){if(this.event_handlers)for(var a=0;this.event_handlers.length>a;a++)Spry.Widget.Utils.removeEventListener(this.event_handlers[a][0],this.event_handlers[a][1],this.event_handlers[a][2],!1);try{delete this.element}catch(b){}try{delete this.input}catch(b){}try{delete this.counterEl}catch(b){}try{delete this.form}catch(b){}try{delete this.event_handlers}catch(b){}try{this.cursorPosition.destroy()}catch(b){}try{delete this.cursorPosition}catch(b){}try{this.initialCursor.destroy()
}catch(b){}try{delete this.initialCursor}catch(b){}for(var c=Spry.Widget.Form.onSubmitWidgetQueue,d=c.length,a=0;d>a;a++)if(c[a]==this){c.splice(a,1);break}},Spry.Widget.ValidationTextarea.prototype.isDisabled=function(){return this.input&&(this.input.disabled||this.input.readOnly)||!this.input},Spry.Widget.ValidationTextarea.prototype.getElement=function(a){return a&&"string"==typeof a?document.getElementById(a):a},Spry.Widget.ValidationTextarea.addLoadListener=function(a){window.addEventListener!==void 0?window.addEventListener("load",a,!1):document.addEventListener!==void 0?document.addEventListener("load",a,!1):window.attachEvent!==void 0&&window.attachEvent("onload",a)},Spry.Widget.ValidationTextarea.processLoadQueue=function(){Spry.Widget.ValidationTextarea.onloadDidFire=!0;for(var b=Spry.Widget.ValidationTextarea.loadQueue,c=b.length,d=0;c>d;d++)b[d].attachBehaviors()},Spry.Widget.ValidationTextarea.onloadDidFire=!1,Spry.Widget.ValidationTextarea.loadQueue=[],Spry.Widget.ValidationTextarea.addLoadListener(Spry.Widget.ValidationTextarea.processLoadQueue),Spry.Widget.ValidationTextarea.addLoadListener(function(){Spry.Widget.Utils.addEventListener(window,"unload",Spry.Widget.Form.destroyAll,!1)}),Spry.Widget.ValidationTextarea.prototype.isBrowserSupported=function(){return Spry.is.ie&&Spry.is.v>=5&&Spry.is.windows||Spry.is.mozilla&&Spry.is.v>=1.4||Spry.is.safari||Spry.is.opera&&Spry.is.v>=9},Spry.Widget.ValidationTextarea.prototype.attachBehaviors=function(){if(this.element&&(this.input="TEXTAREA"==this.element.nodeName?this.element:Spry.Widget.Utils.getFirstChildWithNodeNameAtAnyLevel(this.element,"TEXTAREA")),this.options&&this.options.counterType&&("chars_count"==this.options.counterType||"chars_remaining"==this.options.counterType)&&(this.counterEl=document.getElementById(this.options.counterId),this.counterChar()),this.input){this.input.setAttribute("AutoComplete","off"),this.putHint(),this.cursorPosition=new Spry.Widget.SelectionDescriptor(this.input);var a=this;this.event_handlers=[],this.useCharacterMasking&&(Spry.is.ie?(this.event_handlers.push([this.input,"propertychange",function(b){return a.onKeyEvent(b||event)}]),this.event_handlers.push([this.input,"drop",function(b){return a.onDrop(b||event)}]),this.event_handlers.push([this.input,"keypress",function(b){return a.onKeyPress(b||event)}])):(this.event_handlers.push([this.input,"keydown",function(b){return a.onKeyDown(b)}]),this.event_handlers.push([this.input,"keypress",function(b){return a.safariKeyPress(b)}]),this.event_handlers.push([this.input,"keyup",function(b){return a.safariValidate(b)}]),Spry.is.safari?(this.event_handlers.push([this.input,"mouseup",function(b){return a.safariMouseUp(b)}]),this.event_handlers.push([this.input,"mousedown",function(b){return a.safariMouseDown(b)}])):(this.event_handlers.push([this.input,"dragdrop",function(b){return a.onKeyEvent(b)}]),this.event_handlers.push([this.input,"dragenter",function(b){return a.removeHint(),a.onKeyDown(b)}]),this.event_handlers.push([this.input,"dragexit",function(){return a.putHint()}]))),this.event_handlers.push([this.input,"keydown",function(b){return a.onKeyDown(b||event)}])),this.event_handlers.push([this.input,"focus",function(b){return a.onFocus(b||event)}]),this.event_handlers.push([this.input,"mousedown",function(b){return a.onMouseDown(b||event)}]),this.event_handlers.push([this.input,"blur",function(b){return a.onBlur(b||event)}]),this.validateOn&Spry.Widget.ValidationTextarea.ONCHANGE&&(Spry.is.ie?(this.event_handlers.push([this.input,"propertychange",function(b){return a.onChange(b||event)}]),this.event_handlers.push([this.input,"drop",function(b){return a.onChange(b||event)}])):(this.event_handlers.push([this.input,"keydown",function(b){return a.onKeyDown(b)}]),this.event_handlers.push([this.input,"keypress",function(b){return a.safariChangeKeyPress(b)}]),this.event_handlers.push([this.input,"keyup",function(b){return a.safariChangeValidate(b)}]),Spry.is.safari?(this.event_handlers.push([this.input,"mouseup",function(b){return a.safariChangeMouseUp(b)}]),this.event_handlers.push([this.input,"mousedown",function(b){return a.safariMouseDown(b)}])):(this.event_handlers.push([this.input,"dragdrop",function(b){return a.onChange(b)}]),this.event_handlers.push([this.input,"dragenter",function(b){return a.removeHint(),a.onKeyDown(b)}]),this.event_handlers.push([this.input,"dragexit",function(){return a.putHint()}])))),this.validateOn&Spry.Widget.ValidationTextarea.ONCHANGE||this.useCharacterMasking||(Spry.is.ie?(this.event_handlers.push([this.input,"propertychange",function(){return a.counterChar()}]),this.event_handlers.push([this.input,"drop",function(){return a.counterChar()}])):(this.event_handlers.push([this.input,"keypress",function(){return a.counterChar()}]),this.event_handlers.push([this.input,"keyup",function(){return a.counterChar()}]),Spry.is.safari?this.event_handlers.push([this.input,"mouseup",function(){return a.counterChar()}]):this.event_handlers.push([this.input,"dragdrop",function(){return a.counterChar()}])));for(var b=0;this.event_handlers.length>b;b++)Spry.Widget.Utils.addEventListener(this.event_handlers[b][0],this.event_handlers[b][1],this.event_handlers[b][2],!1);this.form=Spry.Widget.Utils.getFirstParentWithNodeName(this.input,"FORM"),this.form&&(this.form.attachedSubmitHandler||this.form.onsubmit||(this.form.onsubmit=function(a){return a=a||event,Spry.Widget.Form.onSubmit(a,a.srcElement||a.currentTarget)},this.form.attachedSubmitHandler=!0),this.form.attachedResetHandler||(Spry.Widget.Utils.addEventListener(this.form,"reset",function(a){return a=a||event,Spry.Widget.Form.onReset(a,a.srcElement||a.currentTarget)},!1),this.form.attachedResetHandler=!0),Spry.Widget.Form.onSubmitWidgetQueue.push(this))}this.saveState()},Spry.Widget.ValidationTextarea.prototype.onTyping=function(a){if(1!=this.input.disabled&&1!=this.input.readOnly){if(this.initialCursor||(this.initialCursor=this.cursorPosition),this.flags.locked)return!0;var b=this.input.value,c=!0;if(this.flags.hintOn)return!0;if(a&&this.input&&this.options&&this.options.maxChars>0&&c)if(b.length>this.options.maxChars&&(!Spry.Widget.Utils.isSpecialKey(a)&&this.cursorPosition.start==this.cursorPosition.end||Spry.Widget.Utils.isSpecialKey(a)&&b!=this.initialValue||this.cursorPosition.start!=this.cursorPosition.end)){this.flags.locked=!0;var d=this.initialValue,e=this.initialCursor.start,f=this.initialCursor.end;if(d.length&&this.initialCursor.end<d.length){var g=f-e+this.options.maxChars-d.length,h=d.substring(0,e)+b.substring(e,e+g)+d.substring(f,d.length<this.options.maxChars?d.length:this.options.maxChars);f=e+g}else{var h=b.substring(0,this.options.maxChars);f=e=this.options.maxChars}Spry.is.ie?this.input.innerText=h:this.input.value=h,this.redTextFlash(),this.cursorPosition.moveTo(f,f),this.flags.locked=!1,c=!1}else this.setState(Spry.Widget.ValidationTextarea.VALID),this.isMaxInvalid=!1;return this.counterChar(),c}},Spry.Widget.ValidationTextarea.prototype.validateMinRequired=function(a){var b=!1;this.notFireMinYet===void 0?this.notFireMinYet=!1:(b=!0,this.notFireMinYet=!0),this.onBlurOn?this.notFireMinYet=!0:this.onKeyEventOn||(this.notFireMinYet=!0),this.input&&this.options&&this.options.isRequired&&(a.length>0&&this.isRequireInvalid&&(!this.hint||this.hint&&!this.flags.hintOn||this.hint&&a!=this.hint)?(this.switchClassName(this.validClass),this.setState(Spry.Widget.ValidationTextarea.VALID),this.isRequireInvalid=!1):0!=a.length&&(!this.hint||this.hint&&!this.flags.hintOn||this.hint&&a!=this.hint)||this.isRequireInvalid&&!b||((this.notFireMinYet||Spry.is.ie)&&(this.switchClassName(this.requiredClass),this.setState(Spry.Widget.ValidationTextarea.REQUIRED)),this.isRequireInvalid=!0,this.isMinInvalid=!1)),this.input&&this.options&&this.options.minChars>0&&!this.isRequireInvalid&&(a.length>=this.options.minChars&&(!this.hint||this.hint&&!this.flags.hintOn||this.hint&&a!=this.hint)&&this.isMinInvalid?(this.switchClassName(this.validClass),this.setState(Spry.Widget.ValidationTextarea.VALID),this.isMinInvalid=!1):(a.length<this.options.minChars||this.hint&&a==this.hint&&this.flags.hintOn)&&!this.isMinInvalid&&(this.switchClassName(this.invalidCharsMinClass),this.setState(Spry.Widget.ValidationTextarea.MINIMUM),this.isMinInvalid=!0))},Spry.Widget.ValidationTextarea.prototype.counterChar=function(){this.counterEl&&this.options&&this.options.counterType&&("chars_remaining"==this.options.counterType||"chars_count"==this.options.counterType)&&("chars_remaining"==this.options.counterType?this.options.maxChars>0&&(this.flags.hintOn?this.setCounterElementValue(this.options.maxChars):this.options.maxChars>this.input.value.length?this.setCounterElementValue(this.options.maxChars-this.input.value.length):this.setCounterElementValue(0)):this.flags.hintOn?this.setCounterElementValue(0):this.useCharacterMasking&&this.options.maxChars!==void 0&&this.options.maxChars<this.input.value.length?this.setCounterElementValue(this.options.maxChars):this.setCounterElementValue(this.input.value.length))},Spry.Widget.ValidationTextarea.prototype.setCounterElementValue=function(a){"input"!=this.counterEl.nodeName.toLowerCase()&&"textarea"!=this.counterEl.nodeName.toLowerCase()&&"select"!=this.counterEl.nodeName.toLowerCase()&&"img"!=this.counterEl.nodeName.toLowerCase()&&(this.counterEl.innerHTML=a)},Spry.Widget.ValidationTextarea.prototype.reset=function(){this.removeHint(),this.removeClassName(this.requiredClass),this.removeClassName(this.invalidCharsMinClass),this.removeClassName(this.invalidCharsMaxClass),this.removeClassName(this.validClass),this.setState(Spry.Widget.ValidationTextarea.INITIAL);var a=this;setTimeout(function(){a.putHint(),a.counterChar()},10)},Spry.Widget.ValidationTextarea.prototype.validate=function(){if(1==this.input.disabled||1==this.input.readOnly)return!0;this.validateOn&Spry.Widget.ValidationTextarea.ONSUBMIT&&this.removeHint();var a=this.input.value;this.validateMinRequired(a);var b=!this.isMinInvalid&&!this.isRequireInvalid;return b&&this.options.maxChars>0&&!this.useCharacterMasking&&(a.length<=this.options.maxChars||this.hint&&this.hint==a&&this.flags.hintOn?(this.switchClassName(this.validClass),this.setState(Spry.Widget.ValidationTextarea.VALID),this.isMaxInvalid=!1):(this.switchClassName(this.invalidCharsMaxClass),this.setState(Spry.Widget.ValidationTextarea.MAXIMUM),this.isMaxInvalid=!0)),b=b&&!this.isMaxInvalid,b&&this.switchClassName(this.validClass),this.counterChar(),b},Spry.Widget.ValidationTextarea.prototype.setState=function(a){this.state=a},Spry.Widget.ValidationTextarea.prototype.getState=function(){return this.state},Spry.Widget.ValidationTextarea.prototype.removeHint=function(){this.flags.hintOn&&(this.flags.locked=!0,this.input.value="",this.flags.locked=!1,this.flags.hintOn=!1,this.removeClassName(this.hintClass))},Spry.Widget.ValidationTextarea.prototype.putHint=function(){this.hint&&""==this.input.value&&(this.flags.hintOn=!0,this.input.value=this.hint,this.addClassName(this.hintClass))},Spry.Widget.ValidationTextarea.prototype.redTextFlash=function(){var a=this;this.addClassName(this.textareaFlashClass),setTimeout(function(){a.removeClassName(a.textareaFlashClass)},200)},Spry.Widget.ValidationTextarea.prototype.onKeyPress=function(a){return Spry.is.ie&&Spry.is.windows&&13==a.keyCode&&2>this.initialCursor.length+this.options.maxChars-this.input.value.length?(Spry.Widget.Utils.stopEvent(a),!1):void 0},Spry.Widget.ValidationTextarea.prototype.onKeyDown=function(a){return this.saveState(),this.keyCode=a.keyCode,!0},Spry.Widget.ValidationTextarea.prototype.onKeyEvent=function(a){if("propertychange"==a.type&&"value"!=a.propertyName)return!0;var b=this.onTyping(a);b||Spry.Widget.Utils.stopEvent(a)},Spry.Widget.ValidationTextarea.prototype.onChange=function(a){if(Spry.is.ie&&a&&"propertychange"==a.type&&"value"!=a.propertyName)return!0;if(this.flags.drop){var b=this;return setTimeout(function(){b.flags.drop=!1,b.onChange(null)},0),!0}if(this.flags.hintOn)return!0;this.onKeyEventOn=!0;var c=this.validate();return this.onKeyEventOn=!1,c},Spry.Widget.ValidationTextarea.prototype.onMouseDown=function(){this.flags.active&&this.saveState()},Spry.Widget.ValidationTextarea.prototype.onDrop=function(a){if(this.flags.drop=!0,this.removeHint(),Spry.is.ie){var b=document.body.createTextRange();b.moveToPoint(a.x,a.y),b.select()}this.saveState(),this.flags.active=!0,this.addClassName(this.focusClass)},Spry.Widget.ValidationTextarea.prototype.onFocus=function(){this.flags.drop||(this.removeHint(),this.saveState(),this.flags.active=!0,this.addClassName(this.focusClass))},Spry.Widget.ValidationTextarea.prototype.onBlur=function(){this.removeClassName(this.focusClass),this.validateOn&Spry.Widget.ValidationTextarea.ONBLUR&&(this.onBlurOn=!0,this.validate(),this.onBlurOn=!1),this.flags.active=!1;var b=this;setTimeout(function(){b.putHint()},10)},Spry.Widget.ValidationTextarea.prototype.safariMouseDown=function(){this.safariClicked=!0},Spry.Widget.ValidationTextarea.prototype.safariChangeMouseUp=function(a){return this.safariClicked?(this.safariClicked=!1,!0):(this.onKeyDown(a),this.safariChangeValidate(a,!1))},Spry.Widget.ValidationTextarea.prototype.safariMouseUp=function(a){return this.safariClicked?(this.safariClicked=!1,!0):(this.onKeyDown(a),this.safariValidate(a,!1))},Spry.Widget.ValidationTextarea.prototype.safariKeyPress=function(a){return this.safariFlag=new Date,this.safariValidate(a,!0)},Spry.Widget.ValidationTextarea.prototype.safariValidate=function(a,b){if(a.keyCode&&Spry.Widget.Utils.isSpecialKey(a)&&8!=a.keyCode&&46!=a.keyCode)return!0;var c=this.onTyping(a);if(1e3>new Date-this.safariFlag&&b){var d=this;setTimeout(function(){d.safariValidate(a,!1)},1e3)}return c},Spry.Widget.ValidationTextarea.prototype.safariChangeKeyPress=function(a){return this.safariChangeFlag=new Date,this.safariChangeValidate(a,!0)},Spry.Widget.ValidationTextarea.prototype.safariChangeValidate=function(a,b){if(a.keyCode&&Spry.Widget.Utils.isSpecialKey(a)&&8!=a.keyCode&&46!=a.keyCode)return!0;var c=this.onChange(a);if(1e3>new Date-this.safariChangeFlag&&b){var d=this;setTimeout(function(){d.safariChangeValidate(a,!1)},1e3-new Date+this.safariChangeFlag)}return c},Spry.Widget.ValidationTextarea.prototype.saveState=function(){return this.options.maxChars>0&&this.input.value.length>this.options.maxChars?void 0:(this.cursorPosition.update(),this.initialValue=this.flags.hintOn?"":this.input.value,this.initialCursor=this.cursorPosition,!0)},Spry.Widget.ValidationTextarea.prototype.checkClassName=function(a,b){return a&&b?"string"!=typeof a||(a=document.getElementById(a))?(a.className||(a.className=" "),a):!1:!1},Spry.Widget.ValidationTextarea.prototype.switchClassName=function(a){for(var b=[this.invalidCharsMaxClass,this.validClass,this.requiredClass,this.invalidCharsMinClass],c=0;b.length>c;c++)b[c]!=a&&this.removeClassName(b[c]);this.addClassName(a)},Spry.Widget.ValidationTextarea.prototype.addClassName=function(a){var b=this.checkClassName(this.element,a),c=this.checkClassName(this.additionalError,a);b&&-1==b.className.search(RegExp("\\b"+a+"\\b"))&&(this.element.className+=" "+a,c&&(c.className+=" "+a))},Spry.Widget.ValidationTextarea.prototype.removeClassName=function(a){var b=this.checkClassName(this.element,a),c=this.checkClassName(this.additionalError,a);b&&(b.className=b.className.replace(RegExp("\\s*\\b"+a+"\\b","g"),""),c&&(c.className=c.className.replace(RegExp("\\s*\\b"+a+"\\b","g"),"")))},Spry.Widget.SelectionDescriptor=function(a){this.element=a,this.update()},Spry.Widget.SelectionDescriptor.prototype.update=function(){if(Spry.is.ie&&Spry.is.windows){var a=this.element.ownerDocument.selection;if("TEXTAREA"==this.element.nodeName){if("None"!=a.type){try{var b=a.createRange()}catch(c){return}if(b.parentElement()==this.element){var d=this.element.ownerDocument.body.createTextRange();d.moveToElementText(this.element);for(var e=0;0>d.compareEndPoints("StartToStart",b);e++)d.moveStart("character",1);this.start=e,d=this.element.ownerDocument.body.createTextRange(),d.moveToElementText(this.element);for(var f=0;0>d.compareEndPoints("StartToEnd",b);f++)d.moveStart("character",1);this.end=f,this.length=this.end-this.start,this.text=b.text}}}else if("INPUT"==this.element.nodeName){try{this.range=a.createRange()}catch(c){return}this.length=this.range.text.length;var g=this.range.duplicate();this.start=-g.moveStart("character",-1e4),g=this.range.duplicate(),g.collapse(!1),this.end=-g.moveStart("character",-1e4),this.text=this.range.text}}else{var h=this.element,i=0,j=0;try{i=h.selectionStart}catch(c){}try{j=h.selectionEnd}catch(c){}Spry.is.safari&&(2147483647==i&&(i=0),2147483647==j&&(j=0)),this.start=i,this.end=j,this.length=j-i,this.text=this.element.value.substring(i,j)}},Spry.Widget.SelectionDescriptor.prototype.destroy=function(){try{delete this.range}catch(a){}try{delete this.element}catch(a){}},Spry.Widget.SelectionDescriptor.prototype.moveTo=function(a,b){if(Spry.is.ie&&Spry.is.windows){if("TEXTAREA"==this.element.nodeName){var c=this.element.createTextRange();this.range=this.element.createTextRange(),this.range.move("character",a),this.range.moveEnd("character",b-a);var d=this.range.compareEndPoints("StartToStart",c);0>d&&this.range.setEndPoint("StartToStart",c);var e=this.range.compareEndPoints("EndToEnd",c);e>0&&this.range.setEndPoint("EndToEnd",c)}else"INPUT"==this.element.nodeName&&(this.range=this.element.ownerDocument.selection.createRange(),this.range.move("character",-1e4),this.start=this.range.moveStart("character",a),this.end=this.start+this.range.moveEnd("character",b-a));this.range.select()}else{this.start=a;try{this.element.selectionStart=a}catch(f){}this.end=b;try{this.element.selectionEnd=b}catch(f){}}this.ignore=!0,this.update()},Spry.Widget.Form||(Spry.Widget.Form={}),Spry.Widget.Form.onSubmitWidgetQueue||(Spry.Widget.Form.onSubmitWidgetQueue=[]),Spry.Widget.Form.validate||(Spry.Widget.Form.validate=function(a){for(var b=!0,c=!0,d=Spry.Widget.Form.onSubmitWidgetQueue,e=d.length,f=0;e>f;f++)d[f].isDisabled()||d[f].form!=a||(c=d[f].validate(),b=c&&b);return b}),Spry.Widget.Form.onSubmit||(Spry.Widget.Form.onSubmit=function(a,b){return 0==Spry.Widget.Form.validate(b)?!1:!0}),Spry.Widget.Form.onReset||(Spry.Widget.Form.onReset=function(a,b){for(var c=Spry.Widget.Form.onSubmitWidgetQueue,d=c.length,e=0;d>e;e++)c[e].isDisabled()||c[e].form!=b||"function"!=typeof c[e].reset||c[e].reset();return!0}),Spry.Widget.Form.destroy||(Spry.Widget.Form.destroy=function(a){for(var b=Spry.Widget.Form.onSubmitWidgetQueue,c=0;Spry.Widget.Form.onSubmitWidgetQueue.length>c;c++)b[c].form==a&&"function"==typeof b[c].destroy&&(b[c].destroy(),c--)}),Spry.Widget.Form.destroyAll||(Spry.Widget.Form.destroyAll=function(){for(var a=Spry.Widget.Form.onSubmitWidgetQueue,b=0;Spry.Widget.Form.onSubmitWidgetQueue.length>b;b++)"function"==typeof a[b].destroy&&(a[b].destroy(),b--)}),Spry.Widget.Utils||(Spry.Widget.Utils={}),Spry.Widget.Utils.punycode_constants={base:36,tmin:1,tmax:26,skew:38,damp:700,initial_bias:72,initial_n:128,delimiter:45,maxint:2<<25},Spry.Widget.Utils.punycode_encode_digit=function(a){return String.fromCharCode(a+22+75*(26>a))},Spry.Widget.Utils.punycode_adapt=function(a,b,c){a=c?a/this.punycode_constants.damp:a>>1,a+=a/b;for(var d=0;a>(this.punycode_constants.base-this.punycode_constants.tmin)*this.punycode_constants.tmax/2;d+=this.punycode_constants.base)a/=this.punycode_constants.base-this.punycode_constants.tmin;return d+(this.punycode_constants.base-this.punycode_constants.tmin+1)*a/(a+this.punycode_constants.skew)},Spry.Widget.Utils.punycode_encode=function(a,b){var c=a.split("");a=[];for(var d=0;c.length>d;d++)a.push(c[d].charCodeAt(0));var f,g,h,i,j,k,l,e="",m=a.length,n=this.punycode_constants.initial_n,o=0,p=this.punycode_constants.initial_bias,q=0;for(h=0;m>h;h++)if(128>a[h]){if(2>b-q)return!1;e+=String.fromCharCode(a[h]),q++}for(f=g=q,g>0&&(e+=String.fromCharCode(this.punycode_constants.delimiter),q++);m>f;){for(i=this.punycode_constants.maxint,h=0;m>h;h++)a[h]>=n&&i>a[h]&&(i=a[h]);if(i-n>(this.punycode_constants.maxint-o)/(f+1))return!1;for(o+=(i-n)*(f+1),n=i,h=0;m>h;h++){if(n>a[h]&&0==++o)return!1;if(a[h]==n){for(j=o,k=this.punycode_constants.base;!0;k+=this.punycode_constants.base){if(q>=b)return!1;if(l=p>=k?this.punycode_constants.tmin:k>=p+this.punycode_constants.tmax?this.punycode_constants.tmax:k-p,l>j)break;e+=this.punycode_encode_digit(l+(j-l)%(this.punycode_constants.base-l)),q++,j=(j-l)/(this.punycode_constants.base-l)}e+=this.punycode_encode_digit(j),q++,p=this.punycode_adapt(o,f+1,f==g),o=0,f++}}o++,n++}return e},Spry.Widget.Utils.setOptions=function(a,b,c){if(b)for(var d in b)c&&void 0==b[d]||(a[d]=b[d])},Spry.Widget.Utils.firstValid=function(){for(var a=null,b=0;Spry.Widget.Utils.firstValid.arguments.length>b;b++)if(Spry.Widget.Utils.firstValid.arguments[b]!==void 0){a=Spry.Widget.Utils.firstValid.arguments[b];break}return a},Spry.Widget.Utils.getFirstParentWithNodeName=function(a,b){for(;a.parentNode&&a.parentNode.nodeName.toLowerCase()!=b.toLowerCase()&&"BODY"!=a.parentNode.nodeName;)a=a.parentNode;return a.parentNode&&a.parentNode.nodeName.toLowerCase()==b.toLowerCase()?a.parentNode:null},Spry.Widget.Utils.destroyWidgets=function(a){"string"==typeof a&&(a=document.getElementById(a));for(var b=Spry.Widget.Form.onSubmitWidgetQueue,c=0;Spry.Widget.Form.onSubmitWidgetQueue.length>c;c++)"function"==typeof b[c].destroy&&Spry.Widget.Utils.contains(a,b[c].element)&&(b[c].destroy(),c--)},Spry.Widget.Utils.contains=function(a,b){if("object"==typeof a.contains)return b&&a&&(a==b||a.contains(b));for(var c=b;c;){if(c==a)return!0;c=c.parentNode}return!1},Spry.Widget.Utils.specialCharacters=",8,9,16,17,18,20,27,33,34,35,36,37,38,40,45,144,192,63232,",Spry.Widget.Utils.specialSafariNavKeys="63232,63233,63234,63235,63272,63273,63275,63276,63277,63289,",Spry.Widget.Utils.specialNotSafariCharacters="39,46,91,92,93,",Spry.Widget.Utils.specialCharacters+=Spry.Widget.Utils.specialSafariNavKeys,Spry.is.safari||(Spry.Widget.Utils.specialCharacters+=Spry.Widget.Utils.specialNotSafariCharacters),Spry.Widget.Utils.isSpecialKey=function(a){return-1!=Spry.Widget.Utils.specialCharacters.indexOf(","+a.keyCode+",")},Spry.Widget.Utils.getCharacterFromEvent=function(a){var b="keydown"==a.type,c=null,d=null;return Spry.is.mozilla&&!b?a.charCode?d=String.fromCharCode(a.charCode):c=a.keyCode:(c=a.keyCode||a.which,13!=c&&(d=String.fromCharCode(c))),Spry.is.safari&&(b?(c=a.keyCode||a.which,d=String.fromCharCode(c)):(c=a.keyCode||a.which,d=-1!=Spry.Widget.Utils.specialCharacters.indexOf(","+c+",")?null:String.fromCharCode(c))),Spry.is.opera&&(d=-1!=Spry.Widget.Utils.specialCharacters.indexOf(","+c+",")?null:String.fromCharCode(c)),d},Spry.Widget.Utils.getFirstChildWithNodeNameAtAnyLevel=function(a,b){var c=a.getElementsByTagName(b);return c?c[0]:null},Spry.Widget.Utils.getFirstChildWithNodeNameAtAnyLevel=function(a,b){var c=a.getElementsByTagName(b);return c?c[0]:null},Spry.Widget.Utils.getFirstParentWithNodeName=function(a,b){for(;a.parentNode&&a.parentNode.nodeName.toLowerCase()!=b.toLowerCase()&&"BODY"!=a.parentNode.nodeName;)a=a.parentNode;return a.parentNode&&a.parentNode.nodeName.toLowerCase()==b.toLowerCase()?a.parentNode:null},Spry.Widget.Utils.getOptionRealValue=function(a,b){var c=Spry.Widget.Utils.firstValid(a,b);return c!==!1&&(c=parseInt(c,10)),(isNaN(c)||0>c)&&(c=!1),c},Spry.Widget.Utils.getValidChildrenWithNodeNameAtAnyLevel=function(a,b,c){var d=a.getElementsByTagName(b),e=[],f=0;if(d)for(var g=0;d.length>g;g++)d[g].type!==void 0&&d[g].type.toUpperCase()==c.toUpperCase()&&(e[f]=d[g],f++);return e},Spry.Widget.Utils.getFirstParentWithNodeName=function(a,b){for(;a.parentNode&&a.parentNode.nodeName.toLowerCase()!=b.toLowerCase()&&"BODY"!=a.parentNode.nodeName;)a=a.parentNode;return a.parentNode&&a.parentNode.nodeName.toLowerCase()==b.toLowerCase()?a.parentNode:null},Spry.Widget.Utils.addEventListener=function(a,b,c,d){try{a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c,d)}catch(e){}},Spry.Widget.Utils.removeEventListener=function(a,b,c,d){try{a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent&&a.detachEvent("on"+b,c,d)}catch(e){}},Spry.Widget.Utils.stopEvent=function(a){try{this.stopPropagation(a),this.preventDefault(a)}catch(b){}},Spry.Widget.Utils.stopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},Spry.Widget.Utils.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};